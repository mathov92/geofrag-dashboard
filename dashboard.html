<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Trade & Economic Dashboard</title>
    
    <!-- Load Chart.js library for creating charts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <style>
        /* Reset default styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Main body styling */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        /* Dashboard container */
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Header section */
        .dashboard-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .dashboard-header h1 {
            font-size: 36px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .dashboard-header p {
            font-size: 16px;
            opacity: 0.95;
        }
        
        /* Grid layout for charts */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .dashboard-grid-full {
            grid-template-columns: 1fr;
        }
        
        /* Widget styling */
        .widget {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        
        .widget:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        
        .widget-title {
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            font-weight: 600;
        }
        
        /* Chart container */
        .chart-container {
            position: relative;
            height: 350px;
            margin-bottom: 15px;
        }
        
        /* Statistics grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        
        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: background 0.2s;
        }
        
        .stat-item:hover {
            background: #e9ecef;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .stat-value {
            font-size: 22px;
            font-weight: bold;
        }
        
        .stat-change {
            font-size: 11px;
            margin-top: 5px;
        }
        
        .stat-change.positive {
            color: #10b981;
        }
        
        .stat-change.negative {
            color: #ef4444;
        }
        
        /* Legend styling */
        .legend-row {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }
        
        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 3px;
        }
        
        /* Data source links */
        .data-source {
            font-size: 11px;
            color: #888;
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        .data-source a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }
        
        .data-source a:hover {
            text-decoration: underline;
        }
        
        /* Period selector buttons */
        .period-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .period-btn {
            padding: 8px 16px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }
        
        .period-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .period-btn:hover:not(.active) {
            background: #f8f9fa;
        }
        
        /* Info note */
        .info-note {
            background: #fff8dc;
            padding: 12px;
            border-radius: 8px;
            font-size: 12px;
            color: #666;
            margin-top: 15px;
            border-left: 4px solid #fbbf24;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .dashboard-header h1 {
                font-size: 24px;
            }
            .widget {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <h1>üåç Global Trade & Economic Dashboard</h1>
            <p>Real-time monitoring of trade flows, policy interventions, and economic indicators</p>
        </div>
        
        <!-- First Row: Trade Restrictions and Trade % of GDP -->
        <div class="dashboard-grid">
            <!-- Trade Restrictions Chart (BRICS vs G7) -->
            <div class="widget">
                <h2 class="widget-title">üìä Harmful Trade Policy Interventions (2009-2025)</h2>
                <div class="chart-container">
                    <canvas id="restrictionsChart"></canvas>
                </div>
                <div class="legend-row">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #FF6384;"></div>
                        <span>BRICS Members</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #36A2EB;"></div>
                        <span>G7 Members</span>
                    </div>
                </div>
                <div class="info-note">
                    <strong>Note:</strong> Stacked bars show combined annual interventions. 
                    Download exact data from Global Trade Alert links below.
                </div>
                <div class="data-source">
                    <strong>Data Sources:</strong>
                    <a href="https://globaltradealert.org/threads/brics-harmful-trade-policy-interventions" target="_blank">BRICS Data</a> | 
                    <a href="https://globaltradealert.org/threads/g7-harmful-trade-policy-interventions" target="_blank">G7 Data</a>
                </div>
            </div>
            
            <!-- Trade as % of GDP Chart -->
            <div class="widget">
                <h2 class="widget-title">üìà Quarterly Trade as % of GDP</h2>
                <div class="period-selector">
                    <button class="period-btn" onclick="updatePeriod('5Y')">5 Years</button>
                    <button class="period-btn active" onclick="updatePeriod('3Y')">3 Years</button>
                    <button class="period-btn" onclick="updatePeriod('1Y')">1 Year</button>
                </div>
                <div class="chart-container">
                    <canvas id="tradeGdpChart"></canvas>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-label">üá∫üá∏ USA</div>
                        <div class="stat-value" style="color: #3b82f6;">26.8%</div>
                        <div class="stat-change positive">‚Üë 0.5pp QoQ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">üá™üá∫ EU</div>
                        <div class="stat-value" style="color: #f59e0b;">103.6%</div>
                        <div class="stat-change negative">‚Üì 1.2pp QoQ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">üá®üá≥ China</div>
                        <div class="stat-value" style="color: #ef4444;">39.0%</div>
                        <div class="stat-change negative">‚Üì 0.04pp QoQ</div>
                    </div>
                </div>
                <div class="info-note">
                    <strong>Formula:</strong> Trade = (Exports + Imports) / GDP √ó 100
                    <br>EU's high ratio includes intra-EU trade.
                </div>
                <div class="data-source">
                    <strong>Data Sources:</strong>
                    <a href="https://fred.stlouisfed.org" target="_blank">FRED (US)</a> | 
                    <a href="https://ec.europa.eu/eurostat" target="_blank">Eurostat (EU)</a> | 
                    <a href="https://www.ceicdata.com" target="_blank">CEIC (China)</a>
                </div>
            </div>
        </div>
        
        <!-- Second Row: FDI Data Placeholder -->
        <div class="dashboard-grid dashboard-grid-full">
            <div class="widget">
                <h2 class="widget-title">üí∞ Foreign Direct Investment (% of GDP) - Quarterly</h2>
                <div style="padding: 80px; text-align: center; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 10px;">
                    <p style="font-size: 20px; color: #495057; margin-bottom: 20px;">
                        üìä FDI Data Visualization Area
                    </p>
                    <p style="font-size: 14px; color: #6c757d; margin-bottom: 20px;">
                        Replace this section with your FDI quarterly data chart
                    </p>
                    <p style="font-size: 12px; color: #6c757d;">
                        <strong>Data Available From:</strong><br>
                        <a href="https://data.imf.org/en/datasets/IMF.STA:BOP" target="_blank" style="color: #667eea;">IMF Balance of Payments</a> | 
                        <a href="https://data-explorer.oecd.org" target="_blank" style="color: #667eea;">OECD Data Explorer</a> | 
                        <a href="https://data.worldbank.org/indicator/BX.KLT.DINV.WD.GD.ZS" target="_blank" style="color: #667eea;">World Bank</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // =====================================
        // CHART 1: TRADE RESTRICTIONS (BRICS vs G7)
        // =====================================
        function initRestrictionsChart() {
            const ctx = document.getElementById('restrictionsChart').getContext('2d');
            
            // Years from 2009 to 2025
            const years = ['2009', '2010', '2011', '2012', '2013', '2014', '2015', 
                          '2016', '2017', '2018', '2019', '2020', '2021', '2022', 
                          '2023', '2024', '2025'];
            
            // TO UPDATE: Replace these with actual data from Global Trade Alert
            const bricsData = [120, 145, 180, 210, 240, 265, 290, 
                              320, 380, 450, 520, 680, 750, 880, 
                              950, 1020, 1100];
            
            const g7Data = [180, 220, 280, 330, 380, 420, 460, 
                           510, 580, 720, 880, 1120, 1380, 1650, 
                           1820, 1980, 2100];
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: years,
                    datasets: [
                        {
                            label: 'BRICS',
                            data: bricsData,
                            backgroundColor: 'rgba(255, 99, 132, 0.8)',
                            borderColor: '#FF6384',
                            borderWidth: 1
                        },
                        {
                            label: 'G7',
                            data: g7Data,
                            backgroundColor: 'rgba(54, 162, 235, 0.8)',
                            borderColor: '#36A2EB',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            callbacks: {
                                afterTitle: function(tooltipItems) {
                                    let total = 0;
                                    tooltipItems.forEach(function(tooltipItem) {
                                        total += tooltipItem.parsed.y;
                                    });
                                    return 'Total: ' + total.toLocaleString() + ' interventions';
                                },
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y.toLocaleString();
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    size: 11
                                },
                                maxRotation: 45,
                                minRotation: 0
                            }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                font: {
                                    size: 11
                                },
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            },
                            title: {
                                display: true,
                                text: 'Number of Interventions',
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // =====================================
        // CHART 2: TRADE AS % OF GDP
        // =====================================
        
        // Store all quarterly data
        const quarterlyData = {
            labels: [
                '2020 Q1', '2020 Q2', '2020 Q3', '2020 Q4',
                '2021 Q1', '2021 Q2', '2021 Q3', '2021 Q4',
                '2022 Q1', '2022 Q2', '2022 Q3', '2022 Q4',
                '2023 Q1', '2023 Q2', '2023 Q3', '2023 Q4',
                '2024 Q1', '2024 Q2', '2024 Q3'
            ],
            // TO UPDATE: Replace with actual quarterly data
            usa: [25.8, 24.2, 25.5, 26.1, 26.5, 27.0, 27.2, 27.8, 
                  28.1, 27.5, 27.0, 26.8, 26.5, 26.2, 26.3, 26.5, 26.8],
            eu: [85.2, 82.1, 88.5, 92.3, 95.8, 98.2, 101.3, 103.5, 
                 105.2, 102.8, 101.9, 103.1, 104.5, 105.2, 104.8, 103.6],
            china: [35.2, 34.8, 36.1, 37.2, 37.8, 38.2, 38.5, 38.9, 
                    38.1, 37.5, 37.3, 38.2, 39.0, 39.0, 39.0]
        };
        
        let tradeGdpChart;
        let currentPeriod = '3Y';
        
        function initTradeGdpChart() {
            const ctx = document.getElementById('tradeGdpChart').getContext('2d');
            
            const data = getDataForPeriod(currentPeriod);
            
            tradeGdpChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'United States',
                            data: data.usa,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6,
                            pointBackgroundColor: '#3b82f6'
                        },
                        {
                            label: 'European Union',
                            data: data.eu,
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6,
                            pointBackgroundColor: '#f59e0b'
                        },
                        {
                            label: 'China',
                            data: data.china,
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6,
                            pointBackgroundColor: '#ef4444'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                padding: 15,
                                font: {
                                    size: 12
                                },
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y.toFixed(1) + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    size: 11
                                },
                                maxRotation: 45,
                                minRotation: 0
                            }
                        },
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                font: {
                                    size: 11
                                },
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            title: {
                                display: true,
                                text: 'Trade (Exports + Imports) as % of GDP',
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Function to get data based on selected period
        function getDataForPeriod(period) {
            let startIndex = 0;
            
            switch(period) {
                case '1Y':
                    startIndex = Math.max(0, quarterlyData.labels.length - 4);
                    break;
                case '3Y':
                    startIndex = Math.max(0, quarterlyData.labels.length - 12);
                    break;
                case '5Y':
                    startIndex = Math.max(0, quarterlyData.labels.length - 20);
                    break;
            }
            
            return {
                labels: quarterlyData.labels.slice(startIndex),
                usa: quarterlyData.usa.slice(startIndex),
                eu: quarterlyData.eu.slice(startIndex),
                china: quarterlyData.china.slice(startIndex)
            };
        }
        
        // Function to update period
        function updatePeriod(period) {
            currentPeriod = period;
            
            // Update button states
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update chart data
            const newData = getDataForPeriod(period);
            tradeGdpChart.data.labels = newData.labels;
            tradeGdpChart.data.datasets[0].data = newData.usa;
            tradeGdpChart.data.datasets[1].data = newData.eu;
            tradeGdpChart.data.datasets[2].data = newData.china;
            tradeGdpChart.update();
        }
        
        // =====================================
        // INITIALIZE ALL CHARTS ON PAGE LOAD
        // =====================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing dashboard...');
            initRestrictionsChart();
            initTradeGdpChart();
            console.log('Dashboard loaded successfully!');
        });
        

    </script>
</body>
</html>
